"use strict";function calendarCtrl(t,a,s){var e=t.ctrl=this;t.$watch("ctrl.day",function(){e.updateDate(e)}),this.months="January February March April May June July August September October November December".split(" "),this.day=new Date,this.preDays=[],this.days=[],this.postDays=[],this.headings=[""],this.monthName="",this.back=!1,this.locked=!1,this.lockTime=1200,this.next=function(){this.locked||(this.locked=!0,a(function(){this.locked=!1}.bind(this),this.lockTime),this.day.setMonth(this.day.getMonth()+1),this.back=!1,s.removeClass("back"),this.updateDate())},this.prev=function(){this.locked||(this.locked=!0,a(function(){this.locked=!1}.bind(this),this.lockTime),this.day.setMonth(this.day.getMonth()-1),this.back=!0,s.addClass("back"),this.updateDate())},this.updateDate=function(t){this.day.setDate(1),this.preDays=this.getDays(this.day.getDay(),0),this.days=this.getDays(this.getDaysInMonth(),this.preDays.length),this.postDays=this.getDays((7-(this.preDays.length+this.days.length)%7)%7,this.preDays.length+this.days.length),this.monthName=this.months[this.day.getMonth()],this.headings=[{month:this.monthName,year:this.day.getFullYear()}]},this.setDelay=function(t){var a=t.prop("offsetLeft")-s.prop("offsetLeft"),e=t.prop("offsetTop")-s.prop("offsetTop"),i=Math.sqrt(a*a+e*e),d=.75*i;t.css("transition-delay",d+"ms")},this.getDays=function(t,a){var s,e=[];for(s=a;t+a>s;s++)e.push({col:s%7,row:Math.floor(s/7)});return e},this.getDaysInMonth=function(){switch(this.day.getMonth()){case 1:return 1==new Date(this.day.getFullYear(),1,29).getMonth()?29:28;case 3:case 5:case 8:case 10:return 30;default:return 31}}}function calendar(){return{template:'      <header>        <a ng-click="ctrl.prev()" class="back" ng-class="{ disabled: ctrl.locked }"></a>        <div class="date-wrapper">          <span class="title" ng-repeat="heading in ctrl.headings">{{heading.month}} {{heading.year}}</span>        </div>        <a ng-click="ctrl.next()" class="forward" ng-class="{ disabled: ctrl.locked }"></a>      </header>      <section class="day-header">        <div class="day">Sun</div>        <div class="day">Mon</div>        <div class="day">Tue</div>        <div class="day">Wed</div>        <div class="day">Thu</div>        <div class="day">Fri</div>        <div class="day">Sat</div>      </section>      <section class="day-content">        <day ng-repeat="day in ctrl.preDays" class="inactive" data-col="{{day.col}}" data-row="{{day.row}}"></day>        <day ng-repeat="day in ctrl.days" data-col="{{day.col}}" data-row="{{day.row}}">{{$index + 1}}</day>        <day ng-repeat="day in ctrl.postDays" class="inactive" data-col="{{day.col}}" data-row="{{day.row}}"></day>      </section>    ',controller:"calendarCtrl"}}function day(t,a){function s(t,a,s,e){}return{require:"^calendar",link:s}}angular.module("app",["ngAnimate"]).controller("calendarCtrl",calendarCtrl).directive("calendar",calendar).directive("day",day);